(function(api){var About=api.About=api.extendReactClass('MixinBase',{propTypes:{logo:React.PropTypes.string,author:React.PropTypes.string,copyright:React.PropTypes.string,version:React.PropTypes.string,extension:React.PropTypes.string,hasUpdate:React.PropTypes.boolean,textMapping:React.PropTypes.object},getDefaultProps:function(){return{logo:'',link:'#',author:'JoomlaShine.com',copyright:'(c)'+' '+'2013',version:'',extension:'',hasUpdate:false,textMapping:null};},render:function(){var license=api.Edition?api.Edition.parseLicense(this.props.extension):null;if(!license){this.refreshLicense();return null;}return React.createElement('div',{className:'jsn-pages jsn-page-about'},React.createElement('a',{className:'jsn-logo',href:this.props.link,target:'_blank',rel:'noopener noreferrer',onClick:function(){return false;}.bind(this)},React.createElement('img',{src:this.props.logo})),React.createElement('h3',null,React.createElement('a',{href:this.props.link,target:'_blank',rel:'noopener noreferrer',onClick:function(){return false;}.bind(this)},api.Text.parse(this.props.extension.substr(4).toUpperCase()))),React.createElement('p',null,api.Text.parse('JSN_EXTFW_AUTHOR'),':',' ',React.createElement('a',{href:'https://www.joomlashine.com/',target:'_blank',rel:'noopener noreferrer',onClick:function(){return false;}.bind(this)},this.props.author)),React.createElement('p',null,api.Text.parse('JSN_EXTFW_COPYRIGHT'),':',' ',this.props.copyright,' '+'-'+' ',React.createElement('a',{href:'https://www.joomlashine.com/',target:'_blank',rel:'noopener noreferrer',onClick:function(){return false;}.bind(this)},this.props.author)),React.createElement('p',null,api.Text.parse('JSN_EXTFW_VERSION'),':',' '+this.props.version+' '+'-'+' ',React.createElement('span',{className:'label label-success'},api.Text.parse('JSN_EXTFW_LATEST_VERSION'))));},tryPro:function(){api.showIntroduceProModal(null,null,this.props.extension,api.Text.parse('about-cta-name'));}});var Account=api.Account=api.extendReactClass('MixinBase',{propTypes:{extension:React.PropTypes.string,textMapping:React.PropTypes.object},getDefaultProps:function(){return{extension:'',textMapping:null};},render:function(){return React.createElement('div',null,'This feature has been removed');},reloadLicense:function(event){return false;},unlinkAccount:function(){return false;},tryPro:function(){return false;},verifyUser:function(event){return false;}});var Footer=api.Footer=api.extendReactClass('MixinBase',{propTypes:{extension:React.PropTypes.string,version:React.PropTypes.string,frameworkVersion:React.PropTypes.string,updates:React.PropTypes.array,textMapping:React.PropTypes.object},getDefaultProps:function(){return{extension:'',version:'',frameworkVersion:'',updates:[],textMapping:{}};},render:function(){var license=api.Edition?api.Edition.parseLicense(this.props.extension):null;if(!license){this.refreshLicense();}return React.createElement('div',{className:'jsn-footer-bar text-center',style:{clear:'both'}},React.createElement('span',{className:'product-name'},api.Text.parse(this.props.extension.substr(4).toUpperCase())),' ',React.createElement('span',{className:'product-version'},this.props.version),' ',api.Text.parse(api.Text.parse('JSN_EXTFW_POWERED_BY',true).replace('%s',this.props.frameworkVersion)));},initActions:function(){document.body.classList.add('jsn-has-footer-bar');}});var Header=api.Header=api.extendReactClass('MixinBase',{propTypes:{extension:React.PropTypes.string,renewLink:React.PropTypes.string,purchaseLink:React.PropTypes.string,textMapping:React.PropTypes.object},getDefaultProps:function(){return{extension:'',renewLink:'',purchaseLink:'',textMapping:{}};},componentWillMount:function(){var ext=this.props.extension;if(!api.Header.current||!api.Header.current[ext]){this.parent();api.Header.current=api.Header.current||{};api.Header.current[ext]=this;}},render:function(){var ext=this.props.extension;return null;},initActions:function(){return;},click:function(event){return;}});var Help=api.Help=api.extendReactClass('MixinBase',{propTypes:{items:React.PropTypes.array},getDefaultProps:function(){return{items:[]};},render:function(){return React.createElement("div",{className:"row jsn-pages jsn-page-help"},this.props.items.map(item=>{return React.createElement("div",{className:"col-6"},React.createElement("h5",null,api.Text.parse(item.title)),React.createElement("div",{className:"jsn-page-help-img d-flex align-items-center justify-content-center"},React.createElement("img",{width:"105",src:item.image,alt:item.image_alt||item.title})),React.createElement("p",null,api.Text.parse(item.description)),React.createElement("a",{href:item.link,target:"_blank",className:item.link_class||'btn btn-default',"data-event-tracking":item['data-event-tracking'],"data-event-category":item['data-event-category'],"data-event-action":item['data-event-action'],"data-event-label":item['data-event-label']},api.Text.parse(item.link_text)));}));}});var Language=api.Language=api.extendReactClass('MixinBase',{propTypes:{save:React.PropTypes.string,files:React.PropTypes.object,fitHeight:React.PropTypes.string},getDefaultProps:function(){return{save:'',files:{},fitHeight:'.card'};},getInitialState:function(){return{filter:'',files:{}};},componentWillMount:function(){this.parent();for(var file in this.props.files){this.setState({editing:file});break;}},render:function(){if(!this.state.files[this.state.editing]){var lines=this.props.files[this.state.editing].split("\n");var mapping={};for(var i=0;i<lines.length;i++){lines[i]=lines[i].trim();if(lines[i]!=''&&lines[i][0]!=';'&&lines[i][0]!='#'){var tmp=lines[i].trim().split(/\s*=\s*/);mapping[tmp[0].trim()]=tmp[1].trim().substr(1,tmp[1].length-2);}}this.state.files[this.state.editing]=mapping;}return React.createElement('div',{ref:'mountedDOMNode'},React.createElement('div',{className:'card'},React.createElement('div',{className:'card-body'},React.createElement('div',{id:'files-panel',ref:'files'},React.createElement('ul',null,function(){var items=[];for(var file in this.props.files){items.push(React.createElement('li',null,React.createElement('a',{href:'javascript:void(0)',className:file==this.state.editing?'active':'',onClick:function(f,event){event.preventDefault();this.setState({editing:f});}.bind(this,file)},file)));}return items;}.bind(this)())),React.createElement('div',{id:'edit-panel',ref:'edit'},React.createElement('div',{className:'filter-form'},React.createElement('div',{className:'form-group'},React.createElement('input',{ref:'filter',name:'filter',value:this.state.filter,className:'form-control',placeholder:api.Text.parse('JSN_EXTFW_SEARCH_FOR'),onChange:function(event){this.setState({filter:event.target.value});}.bind(this)}))),React.createElement('div',{className:'edit-form'},function(){var items=[];var filter=this.state.filter.toLowerCase();for(var k in this.state.files[this.state.editing]){var text=this.state.files[this.state.editing][k].toLowerCase();items.push(React.createElement('div',{className:'form-group '+(this.editing==k||text.indexOf(filter)>-1?'':'hidden')},React.createElement('input',{name:k,value:this.state.files[this.state.editing][k],className:'form-control',onFocus:function(event){this.editing=event.target.name;}.bind(this),onBlur:function(event){delete this.editing;}.bind(this),onChange:function(event){var files=this.state.files;files[this.state.editing][event.target.name]=event.target.value;this.setState({files:files});}.bind(this)})));}return items;}.bind(this)())))));},save:function(cb){var inputs=this.refs.mountedDOMNode.querySelectorAll('input');for(var i=0;i<inputs.length;i++){inputs[i].disabled=true;}api.Ajax.request(this.props.save,function(res){for(var i=0;i<inputs.length;i++){inputs[i].disabled=false;}if(!res.responseJSON||!res.responseJSON.success){api.Modal.alert(res.responseJSON?res.responseJSON.data:res.responseText);}if(typeof cb=='function'){cb(res);}}.bind(this),{files:this.state.files});}});var Privacy=api.Privacy=api.extendReactClass('MixinBase',{propTypes:{extension:React.PropTypes.string,textMapping:React.PropTypes.object},getDefaultProps:function(){return{extension:'',textMapping:null};},getInitialState:function(){return{enabled:api.Tracking.config[this.props.extension]?api.Tracking.config[this.props.extension].enabled:this.props.enabled||false,changed:false,saving:false};},render:function(){return React.createElement('div',null,'This feature has been removed');},componentDidMount:function(){api.Event.add(api.Tracking,'TrackingConfigChanged',function(){this.setState({enabled:api.Tracking.config[this.props.extension]&&api.Tracking.config[this.props.extension].enabled?true:false});}.bind(this));},saveSettings:function(){this.setState({saving:true});api.Ajax.request(api.Edition.getLink('update&context=settings',this.props.extension),function(res){if(!res.responseJSON||!res.responseJSON.success){api.Modal.error(res);}else{var msg;if(res.responseJSON.data&&res.responseJSON.data.message){msg=res.responseJSON.data.message;}else{msg=api.Text.parse('JSN_EXTFW_CHANGES_SAVED_SUCCESSFULLY');}var exist=document.querySelector('.noty_message');if(!exist||exist.textContent.trim()!=msg){noty({text:msg,theme:'relax',layout:'top',type:'success',animation:{open:'animated fadeIn',close:'animated fadeOut'}});setTimeout(function(){document.querySelector('.noty_message').click();},2000);}this.setState({changed:false,saving:false});}}.bind(this),{allow_tracking:this.state.enabled?1:0});}});var Update=api.Update=api.extendReactClass('MixinBase',{propTypes:{trigger:React.PropTypes.string,extension:React.PropTypes.string,updates:React.PropTypes.array,textMapping:React.PropTypes.object},getDefaultProps:function(){return{trigger:'',extension:'',updates:[],textMapping:{}};},getInitialState:function(){return{action:null,current:0,success:[],failure:{}};},render:function(){if(this.state.action&&typeof this[this.state.action]=='function'){this[this.state.action]();}return null;},componentDidMount:function(){this.parent();if(this.props.trigger){api.Event.add(document,'click',this.start);}},start:function(event){var target=event.target;while(target&&target.nodeName!='BODY'){if(target.parentNode){var elms=target.parentNode.querySelectorAll(this.props.trigger);if(elms&&elms.length&&Array.prototype.indexOf.call(elms,target)>-1){break;}}target=target.parentNode;}if(!target||target.nodeName=='BODY'){return;}event.preventDefault();event.stopPropagation();this.setState({action:'confirm'});},confirm:function(){this.modal=api.Modal.get({id:'jsn-product-update-modal',type:'html',width:'720px',title:api.Text.parse('JSN_EXTFW_UPDATE_MODAL_TITLE'),content:React.createElement('div',{className:'jsn-product-update-confirm'},React.createElement('p',null,api.Text.parse(api.Text.parse('JSN_EXTFW_UPDATE_MODAL_CONFIRM_MESSAGE',true).replace('%s',api.Text.parse(this.props.extension.substr(4).toUpperCase())))),React.createElement('div',{className:'alert alert-warning'},React.createElement('span',{className:'label label-danger'},api.Text.parse('JSN_EXTFW_UPDATE_MODAL_CONFIRM_IMPORTANT_INFO')),React.createElement('ul',null,React.createElement('li',{className:'mb-0'},api.Text.parse(api.Text.parse('JSN_EXTFW_UPDATE_MODAL_CONFIRM_IMPORTANT_NOTE',true).replace('%s',api.Text.parse(this.props.extension.substr(4).toUpperCase())))),this.props.updates.map(product=>{var text;if(product.identified_name=='ext_framework2'){text='JSN_EXTFW_UPDATE_MODAL_CONFIRM_IMPORTANT_FRAMEWORK';}else{if(this.props.updates.length==1){text=api.Text.parse('JSN_EXTFW_UPDATE_MODAL_CONFIRM_IMPORTANT_EXTENSION_ONLY',true);}else{text=api.Text.parse('JSN_EXTFW_UPDATE_MODAL_CONFIRM_IMPORTANT_EXTENSION',true);}text=text.replace('%1$s',api.Text.parse(this.props.extension.substr(4).toUpperCase())).replace('%2$s',this.props.extension.substr(4).toLowerCase().replace(/\d+$/,''));}return React.createElement('li',{className:'mb-0'},api.Text.parse(text));})))),buttons:[{text:api.Text.parse('JSN_EXTFW_UPDATE_INSTALL_BUTTON_TEXT'),className:'btn btn-primary',onClick:function(){this.setState({action:'install'});}.bind(this)},{text:api.Text.parse('JSN_EXTFW_UPDATE_CANCEL_BUTTON_TEXT'),className:'btn btn-default',onClick:api.Modal.hide}]});},install:function(){var current=this.state.current;this.modal.setState({content:React.createElement('div',{className:'jsn-product-update-install'},React.createElement('p',null,api.Text.parse('JSN_EXTFW_UPDATE_MODAL_INSTALL_MESSAGE')),React.createElement('ul',null,this.props.updates.map((update,index)=>{if(index<=current){return React.createElement('li',{ref:'extension_'+index},React.createElement('span',{className:'title'},api.Text.parse(api.Text.parse('JSN_EXTFW_UPDATE_DOWNLOAD_AND_INSTALL_EXTENSION',true).replace('%s',api.Text.parse(update.name)))),React.createElement('span',{className:this.getIcon(update.identified_name)}),React.createElement('div',{className:'progress hidden'},React.createElement('div',{className:'progress-bar',role:'progressbar',style:{width:'0%'}},React.createElement('span',{className:'percentage'},'0%'))),React.createElement('div',{className:'alert alert-danger'+(this.getError(update.identified_name)?'':' hidden')},this.getError(update.identified_name)));}}))),buttons:this.props.updates[current]!==undefined?'disabled':[{text:api.Text.parse('JSN_EXTFW_CLOSE'),className:'btn btn-primary',onClick:function(modal,event){event.target.disabled=true;event.target.innerHTML='<i class="fa fa-circle-o-notch fa-spin"></i>';(window.top||window).location.reload();}}]});if(this.props.updates[current]!==undefined){setTimeout(function(){var downloadUrl=api.urls.ajaxBase+'&context=update&action=download';var progressBar=this.refs['extension_'+current].querySelector('.progress');var progressBarInner=progressBar.querySelector('[role="progressbar"]');var progressBarText=progressBar.querySelector('.percentage');downloadUrl+='&component='+this.props.extension;downloadUrl+='&id='+this.props.updates[current].identified_name;api.Ajax.downloadFile(downloadUrl,progressBar,function(res){if(!res||!res.responseJSON||!res.responseJSON.success){var failure=this.state.failure;var message=res&&res.responseJSON?res.responseJSON.data:res.responseText;failure[this.props.updates[current].identified_name]=message;this.setState({failure:failure,current:current+1});}else{api.Ajax.request(downloadUrl.replace('&action=download','&action=install'),function(res){progressBarInner.style.width='100%';progressBarText.textContent='100%';setTimeout(function(){progressBar.classList.add('hidden');progressBarInner.className=progressBarInner.className.replace(' progress-bar-striped active','');if(res.responseText.trim().match(/^<script[^>]*>(.|[\r\n])+<\/script>$/)){res.responseJSON=res.responseJSON||{};res.responseJSON.success=true;}if(!res||!res.responseJSON||!res.responseJSON.success){var failure=this.state.failure;var message=res&&res.responseJSON?res.responseJSON.data:res.responseText;failure[this.props.updates[current].identified_name]=message;this.setState({failure:failure,current:current+1});}else{var success=this.state.success;success.push(this.props.updates[current].identified_name);this.setState({success:success,current:current+1});}}.bind(this),500);}.bind(this));}}.bind(this),96);}.bind(this),10);}},getIcon:function(id){if(this.state.success.indexOf(id)>-1){return 'fa fa-check-circle-o text-success';}else if(this.state.failure[id]!==undefined){return 'fa fa-times-circle-o text-danger';}else{return 'hidden';}},getError:function(id){return api.Text.parse(this.state.failure[id]!==undefined?this.state.failure[id]:false);},componentWillUnmount:function(){this.parent();if(this.props.trigger){api.Event.remove(document,'click',this.start);}}});})((JSN=window.JSN||{}));