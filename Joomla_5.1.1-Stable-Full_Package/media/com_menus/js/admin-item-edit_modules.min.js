/**
 * @copyright  (C) 2018 Open Source Matters, Inc. <https://www.joomla.org>
 * @license    GNU General Public License version 2 or later; see LICENSE.txt
 */const options=Joomla.getOptions("menus-edit-modules",{}),viewLevels=options.viewLevels||[],menuId=options.itemId||0,assigned1=document.getElementById("jform_toggle_modules_assigned1"),assigned0=document.getElementById("jform_toggle_modules_assigned0"),published1=document.getElementById("jform_toggle_modules_published1"),published0=document.getElementById("jform_toggle_modules_published0");assigned1&&assigned1.addEventListener("click",()=>{document.querySelectorAll("tr.no").forEach(e=>{e.classList.add("table-row"),e.classList.remove("hidden")})}),assigned0&&assigned0.addEventListener("click",()=>{document.querySelectorAll("tr.no").forEach(e=>{e.classList.add("hidden"),e.classList.remove("table-row")})}),published1&&published1.addEventListener("click",()=>{document.querySelectorAll(".table tr.unpublished").forEach(e=>{e.classList.add("table-row"),e.classList.remove("hidden")})}),published0&&published0.addEventListener("click",()=>{document.querySelectorAll(".table tr.unpublished").forEach(e=>{e.classList.add("hidden"),e.classList.remove("table-row")})});const createElement=(e,s,d=[])=>{const o=document.createElement(e);return o.textContent=s,d.length&&o.classList.add(...d),o},updateView=e=>{const s=e.id,d=e.position,o=e.title,i=e.assignment,c=e.status,r=e.access,a=document.getElementById(`menus-${s}`),n=document.getElementById(`tr-${s}`),u=document.getElementById(`status-${s}`),l=(e.assigned||[]).map(m=>Math.abs(m)).indexOf(menuId);let t=0;switch(i==="-"?t=0:i===0?t=2:i>0?l>=0?t=1:l<0&&(t=0):i<0&&(l>=0?t=0:l<0&&(t=1)),t){case 1:a.innerHTML=createElement("span",Joomla.Text._("JYES"),["badge","bg-success"]).outerHTML,n.classList.add("no");break;case 2:a.innerHTML=createElement("span",Joomla.Text._("JALL"),["badge","bg-info"]).outerHTML,n.classList.add("no");break;case 0:default:a.innerHTML=createElement("span",Joomla.Text._("JNO"),["badge","bg-danger"]).outerHTML,n.classList.add("no")}c===1?(u.innerHTML=createElement("span",Joomla.Text._("JYES"),["badge","bg-success"]).outerHTML,n.classList.remove("unpublished")):c===0?(u.innerHTML=createElement("span",Joomla.Text._("JNO"),["badge","bg-danger"]).outerHTML,n.classList.add("unpublished")):c===-2&&(u.innerHTML=createElement("span",Joomla.Text._("JTRASHED"),["badge","bg-secondary"]).outerHTML,n.classList.add("unpublished")),document.querySelector(`#title-${s}`).textContent=o,document.querySelector(`#position-${s}`).textContent=d,document.querySelector(`#access-${s}`).textContent=viewLevels[r]||""},msgListener=function(s){s.origin===window.location.origin&&s.data.messageType==="joomla:content-select"&&s.data.contentType==="com_modules.module"&&(s.data.id&&updateView(s.data),this.close())};document.addEventListener("joomla-dialog:open",({target:e})=>{if(!e.classList.contains("menus-dialog-module-editing"))return;const s=msgListener.bind(e);window.addEventListener("message",s),e.addEventListener("joomla-dialog:close",()=>{window.removeEventListener("message",s)})});
