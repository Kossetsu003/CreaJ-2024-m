/**
 * @copyright  (C) 2018 Open Source Matters, Inc. <https://www.joomla.org>
 * @license    GNU General Public License version 2 or later; see LICENSE.txt
 */((l,s,f,o)=>{if(!s)throw new Error("core.js was not properly initialised");const a=({target:e})=>{e.value.length>1&&(e.awesomplete.list=[],s.request({url:`${s.getOptions("finder-search").url}&q=${e.value}`,promise:!0}).then(t=>{let n;try{n=JSON.parse(t.responseText)}catch(r){console.error(r);return}Object.prototype.toString.call(n.suggestions)==="[object Array]"&&(e.awesomplete.list=n.suggestions)}).catch(t=>{console.error(t)}))},c=e=>{e.stopPropagation();const t=e.target.querySelector(".js-finder-advanced");t&&[].slice.call(t.querySelectorAll("select")).forEach(r=>{r.value||r.setAttribute("disabled","disabled")})},d=e=>{const t=e.target.closest("form");t&&t.submit()},i=()=>{o.querySelectorAll(".js-finder-search-query").forEach(e=>{s.getOptions("finder-search")&&(e.awesomplete=new l(e),e.addEventListener("input",a),e.closest("form").querySelector(".js-finder-advanced")||e.addEventListener("awesomplete-selectcomplete",d))}),o.querySelectorAll(".js-finder-searchform").forEach(e=>e.addEventListener("submit",c)),o.removeEventListener("DOMContentLoaded",i)};o.addEventListener("DOMContentLoaded",i)})(window.Awesomplete,window.Joomla,window,document);
